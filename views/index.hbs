{{>header}}

<body class="register">



    <section>
        <form action="#" method="post" class="login" enctype="multipart/form-data">
            <h4>Register</h4>
            <label>
                Name
                <input id="username" type="text" required name="name">
            </label>

            <label>
                Age
                <input id="age" type="number" required name="age">
            </label>

            <label>
                Password
                <input id="password" type="password" required name="password">
            </label>

            <label for="image">
                Baby picture
                <input id="baby-img" type="file" name="baby-img">
            </label>

            <label for="image">
                Old picture
                <input id="old-image" type="file" name="old-image">
            </label>

            <label>
                Location
                <input id="location" type="text" required name="location">
            </label>

            <label>
                Profession
                <input id="profession" type="text" required name="profession">
            </label>

            <label>
                About
                <textarea name="about" id="" cols="30" rows="10"></textarea>
            </label>
            <button type="submit">Register</button>
        </form>
    </section>

    <script>

        const form = document.getElementsByTagName('form')[0];
        const button = document.getElementsByTagName('button')[0];

        const name = document.getElementById('username');
        const age = document.getElementById('age');
        const password = document.getElementById('password');

        const babyImg = document.getElementById('baby-img');
        const oldImg = document.getElementById('old-image');

        button.addEventListener('click', (e) => {
            e.preventDefault();

            const formData = new FormData(form);

            fetch('http://localhost:3000/user', {
                method: 'POST',
                body: formData //Send data of form to server
            }).then((res) => {
                return res.json()
            }).then((data) => {
                document.cookie = `access_token=${data.token}; max-age=86400`;
                console.log(data)
                return window.location.href = 'http://localhost:3000/home'
            })
        })
    </script>
</body>
{{>footer}}