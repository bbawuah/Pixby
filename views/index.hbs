{{>header}}

<body class="register">



    <section>
        <form action="#" method="post" class="login" enctype="multipart/form-data">
            <h4>Register</h4>
            <label>
                Name
                <input id="username" type="text" required name="name">
            </label>

            <label>
                Age
                <input id="age" type="number" required name="age">
            </label>

            <label>
                Password
                <input id="password" type="password" required name="password">
            </label>

            <label for="image">
                Baby picture
                <input id="baby-img" type="file" name="img">
            </label>

            <label for="image">
                Old picture
                <input id="old-image" type="file" name="imgOld">
            </label>

            <label>
                Location
                <input id="location" type="text" required name="location">
            </label>

            <label>
                Profession
                <input id="profession" type="text" required name="profession">
            </label>

            <label>
                About
                <textarea name="about" id="" cols="30" rows="10"></textarea>
            </label>
            <button type="submit">Register</button>
        </form>
    </section>

    <script>

        const form = document.getElementsByTagName('form')[0];
        const button = document.getElementsByTagName('button')[0];

        const name = document.getElementById('username');
        const age = document.getElementById('age');
        const password = document.getElementById('password');

        const babyImg = document.getElementById('baby-img');
        const oldImg = document.getElementById('old-image');

        button.addEventListener('click', (e) => {
            e.preventDefault();

            const data = {
                name: name.value,
                age: age.value,
                password: password.value,
              
            }



            fetch('http://localhost:3000/user', {
                method: 'POST',
                headers: { "Accept": "application/json" },
                body: JSON.stringify(data) //Send data of form to server
            }).then((res) => {
                return res.json()
            }).then((data) => {
                localStorage.setItem('access_token', data.token)
                console.log(data)
                return window.location.href = 'http://localhost:3000/home'
            })
        })
    </script>
</body>
{{>footer}}